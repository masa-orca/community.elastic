---
- vars:
    elastic_index_parameters: &elastic_index_parameters
      timeout: 30

  block:

  - name: Basic module test - single node no auth
    community.elastic.elastic_cluster_health:
      <<: *elastic_index_parameters
    ignore_errors: yes
    register: elastic

  - debug: var=elastic

  - assert:
      that:
        - "elastic.changed == False"
        - "elastic.cluster_health.cluster_name == 'docker-cluster'"
        - "elastic.cluster_health.number_of_data_nodes == 1"
        - "elastic.cluster_health.number_of_nodes == 1"


